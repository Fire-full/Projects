Class inherited ЗарплатаСтандарт.Алгоритмы.Начисления.Произвольные.Ставка_Дни "Оклад по Ученой степени/званию в днях (Оклад*ДниРаб/ДниМес)";

  Import Первичка;
  Import ЗарплатаСтандарт;
  Import          Classes Константы;

InClass  Public

  ---------------------------------------------------------
  var ТипРасчета       :спрТипРасчета = спрТипРасчета.Оклад;
  ---------------------------------------------------------
  var ЗаголовокПоля2   :String        = "Звание" + Chr(13) + "(за месяц)";
  ---------------------------------------------------------

  func CreateEx(const аРеквизит :Вычислители.Реквизит):Алгоритмы.Начисления.Специальные.ОВЗ;
    Result = inherited CreateEx(аРеквизит);
  end;

InObject Public

  func УсловиеВыполнения:Logical;
    Result = ((Реквизит.ПостНачисление <> nil or Реквизит.КоличествоПостНачислений = 0) and (Реквизит.locЗваниеЕсть or Реквизит.Показатель2 > 0));
  end;

  func Расчет_Показатель1 :Numeric;
    -- Отработанное время считаем только для первого дубля, остальное вручную
    Result = if(НомерДубля = 1, Реквизит.ОтработаноДней(НормаЗаМесяц), nil);
  end;

  func Расчет_Показатель2 :Numeric;
      if Реквизит.locЗваниеЕсть then
        Result =  Реквизит.locЗваниеОклад;
      Иначе
        Result = 0;
      end;
  end;

  func Расчет_Показатель3 :Numeric;
    if НормаЗаМесяц = 0 and (Реквизит.вводПоказатель1 or НомерДубля > 1) then
      -- Получение нормы дней за месяц при вводе количества дней вручную или для дублей > 1
      Реквизит.ОтработаноДней(НормаЗаМесяц);
    end;
    if НормаЗаМесяц > 0 then
      if Реквизит.locЗваниеЕсть then
        Реквизит.Показатель2 = Реквизит.locЗваниеОклад;
        Return(Round(Реквизит.Показатель1*Реквизит.Показатель2/НормаЗаМесяц, Реквизит.Точность));
      end;
    end;
  end;

InObject Private

  var НормаЗаМесяц  :Numeric;

  func ЗаполнитьНастройки :Logical;
    Result       = inherited ЗаполнитьНастройки;
    НормаЗаМесяц = nil;
  end;

End